- type: entity
  parent: BaseControllableTurret
  id: WeaponArtilleryA220
  name: A-220M
  suffix: 57mm
  components:
    - type: Icon
      sprite: _VXS/Weapons/Artillery/a220.rsi
      state: icon
    - type: Sprite
      sprite: _VXS/Weapons/Artillery/a220.rsi
      drawdepth: Mobs
      layers:
        - state: icon
    - type: ContentEye
      maxZoom: 2.5,2.5
      targetZoom: 2.0,2.0
    - type: EyeCursorOffset
      maxOffset: 10
      pvsIncrease: 5.0
      offsetSpeed: 0.3
    - type: Eye
      pvsScale: 5
    #- type: NightVision TODO: Port both systems
    #  overlay: true
    - type: Destructible
      thresholds:
        - trigger:
            !type:DamageTrigger
            damage: 500
          behaviors:
            - !type:DoActsBehavior
              acts: [ "Destruction" ]
        - trigger:
            !type:DamageTrigger
            damage: 100
          behaviors:
            - !type:DoActsBehavior
              acts: [ "Destruction" ]
            - !type:PlaySoundBehavior
              sound:
                collection: MetalGlassBreak
            - !type:SpawnEntitiesBehavior
              spawn:
                WeaponArtilleryA220Broken:
                  min: 1
                  max: 1
                SheetSteel1:
                  min: 1
                  max: 4
                ScrapGlass:
                  min: 0
                  max: 2
                ScrapSteel:
                  min: 0
                  max: 2
    - type: Gun
      fireRate: 4
      projectileSpeed: 50
      selectedMode: SemiAuto
      availableModes:
        - SemiAuto
      soundGunshot:
        collection: ADTShipBattle57mmGunFire
    - type: BallisticAmmoProvider
      whitelist:
        tags:
          - ArtilleryShell57mm
      capacity: 20
      proto: null
      soundInsert:
        path: /Audio/_ADT/ADTGlobalEvents/ShipBattle/Weapons/Guns/MagIn/shell_in.ogg
      soundRack:
        path: /Audio/_ADT/ADTGlobalEvents/ShipBattle/Weapons/Guns/MagIn/shell_in.ogg

- type: entity
  parent: BaseControllableTurretBroken
  id: WeaponArtilleryA220Broken
  name: A-220M
  suffix: broken
  components:
    - type: Icon
      sprite: _VXS/Weapons/Artillery/a220.rsi
      state: broken
    - type: Sprite
      sprite: _VXS/Weapons/Artillery/a220.rsi
      drawdepth: Mobs
      layers:
        - state: broken
    - type: Destructible
      thresholds:
        - trigger:
            !type:DamageTrigger
            damage: 450
          behaviors:
            - !type:DoActsBehavior
              acts: [ "Destruction" ]
            - !type:PlaySoundBehavior
              sound:
                collection: MetalGlassBreak
            - !type:SpawnEntitiesBehavior
              spawn:
                SheetSteel1:
                  min: 6
                  max: 12
    - type: Fixtures
      fixtures:
        fix1:
          shape:
            !type:PhysShapeCircle
            radius: 0.35
          density: 60
          mask:
          - MachineMask
          layer:
          - MidImpassable
          - LowImpassable
